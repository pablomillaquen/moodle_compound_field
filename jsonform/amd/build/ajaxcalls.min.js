define ("local_jsonform/ajaxcalls",["exports","jquery","core/notification","core/ajax","local_jsonform/jsoneditor"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.editor=a.getform=a.updateform=a.loadform=void 0;b=f(b);d=f(d);function f(a){return a&&a.__esModule?a:{default:a}}var g;a.editor=g;var h=function(a,f){var g=d.default.call([{methodname:"local_jsonform_loadjson",args:{userid:a,fieldid:f},fail:c.exception}]);g[0].then(function(a){if(0<a.length){(0,b.default)("#data").val(a[0].data);var c=JSON.parse(a[0].data);e.JSONEditor.setValue(c)}else{return Error}return 0<a.length?a[0].data:"No data"})};a.loadform=h;var i=function(a,b,e,f,g){var h=d.default.call([{methodname:"local_jsonform_updatejson",args:{data:e,userid:a,fieldid:b,dataformat:f,type:g},fail:c.exception}]);h[0].then(function(b){window.console.log(b);window.location.replace("/user/profile.php?id="+a)})};a.updateform=i;var j=function(f,h){var i=d.default.call([{methodname:"local_jsonform_getform",args:{fieldid:h},fail:c.exception}]),j=d.default.call([{methodname:"local_jsonform_loadjson",args:{userid:f,fieldid:h},fail:c.exception}]);i[0].then(function(b){var c=document.getElementById("editor_holder");a.editor=g=new e.JSONEditor(c,{schema:JSON.parse(b[0].param1),theme:"bootstrap4",iconlib:"fontawesome4",disable_edit_json:!0,disable_properties:!0,disable_collapse:!0,prompt_before_delete:!1,template:"mustache"})}).then(function(){return j[0]}).then(function(a){if(a[0].data){g.setValue(JSON.parse(a[0].data));(0,b.default)("#data").val(a[0].data)}}).catch(window.console.log.bind(console))};a.getform=j});
//# sourceMappingURL=ajaxcalls.min.js.map
